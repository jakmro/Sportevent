{% extends "base.html" %}

{% block title %}Event{% endblock %}

{% block content %}
    <h2>Name: {{ event.name }}</h2>
    <a href="{% url 'facility' event.facility_id %}">
        <p>Facility: {{ event.facility }}</p>
    </a>
    <p>Description: {{ event.description }}</p>
    <p>Sport type: {{ event.sport_type }}</p>
    <p>Start datetime: {{ event.start_datetime }}</p>
    <p>End datetime: {{ event.end_datetime }}</p>
    <p>Meeting count: {{ event.meeting_count }}</p>
    {% if event.repeat_every_n_days %}
        <p>Repeat every {{ event.repeat_every_n_days }} days</p>
    {% endif %}
    <p>Min people no: {{ event.min_people_no }}</p>
    <p>Max people no: {{ event.max_people_no }}</p>
    {% if user.is_authenticated %}
        {% if not registration %}
            <a href="{% url 'add_registration' event.pk %}">
                <p>Register</p>
            </a>
        {% else %}
            <a href="{% url 'delete_registration' registration.pk %}">
                <p>Unregister</p>
            </a>
            <p>Chat link: {{ chat }}</p>
        {% endif %}
    {% endif %}
    {% if subscription_link %}
        <a href="{{ subscription_link }}">Event calendar subscription link</a>
        <br>
        {{ subscription_link }}
    {% endif %}
    {% if user.is_authenticated and user.pk == event.user.pk %}
        <a href="{% url 'update_event' event.pk %}">
            <p>Update Event</p>
        </a>
        <a href="{% url 'delete_event' event.pk %}">
            <p>Delete Event</p>
        </a>
    {% endif %}
    {% for registration in registrations %}
        <a href="{% url 'user_profile' registration.user.pk %}">
            <p>{{ registration.user }}</p>
        </a>
    {% endfor %}
{% endblock %}
